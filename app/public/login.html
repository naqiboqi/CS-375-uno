<!DOCTYPE html>
<html>
    <head>
        <title>Login Page</title>
    </head>
    <body>
        <div id="login">
            <form id="login-form">
                <p id="login-status">Enter login information</p>
                <input type="text" id="user-input" placeholder="Enter your username"/>
                <input type="text" id="pass-input" placeholder="Enter your password"/>
                <button id="login-button">Login</button>
                <button id="new-account-button">Create a New Account</button>
            </form>
        </div>
        
        <script>
            // TODO: move this stuff into a login.js file
            const loginMessage = document.getElementById("login-status");
            const userInput = document.getElementById("user-input");
            const passInput = document.getElementById("pass-input");

            const loginButton = document.getElementById("login-button");
            loginButton.addEventListener("click", () => {
                const username = userInput.value;
                const password = userInput.value;

                doUserLogin(username, password);
            });


            function doUserLogin(username, password) {
            
                fetch("/login", {
                    headers: {
                    'Accept': 'application/json',
                    'Content-Type': 'application/json'
                    },

                    method: "POST",
                    body: JSON.stringify({
                        "username": username, 
                        "password" : password,
                    }),
                }).then(response => {
                    if (response.ok) {
                        loginMessage.textContent = `${username} has logged in!`;
                    }
                    else {
                        loginMessage.textContent = "Invalid login credentials";
                    }
                })
                
            };
            // TODO: figure out how to direct user to a new page to create an account (take them to create.html)
            const newAccountButton = document.getElementById("new-account-button");
            newAccountButton.addEventListener("click", () => {
                
            });
        </script>
    </body>
</html>
